<div class="container mt-5 pt-5 request-history-container">

  <!-- Header Section -->
  <div class="d-flex justify-content-between align-items-center mb-5 p-4 bg-light rounded-3 shadow-sm">
    <h2 class="m-0 text-primary">Service Requests History</h2>
    
  </div>

  <!-- Filters Section 
  <div class="row g-4 mb-5 p-4 bg-light rounded-3 shadow-sm">
    <div class="col-md-4">
      <mat-form-field class="w-100">
        <mat-label>Status</mat-label>
        <mat-select [(ngModel)]="statusFilter">
          <mat-option value="">All Statuses</mat-option>
          <mat-option value="Pending">Pending</mat-option>
          <mat-option value="Completed">Completed</mat-option>
          <mat-option value="Cancelled">Cancelled</mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div class="col-md-4">
      <label for="serviceTypeFilter" class="form-label fw-bold">Service Type:</label>
      <select id="serviceTypeFilter" class="form-select">
        <option value="">All Services</option>
        <option value="Carpentry">Carpentry</option>
        <option value="Plumbing">Plumbing</option>
        <option value="Painting">Painting</option>
        <option value="Home Services">Home Services</option>
      </select>
    </div>

    <div class="col-md-4 d-flex align-items-end">
      <button mat-raised-button color="primary" class="w-100">
        <mat-icon>filter_alt</mat-icon> Apply Filters
      </button>
    </div>
  </div>-->

  <!-- Loading State 
  <div class="text-center my-5 py-5 loading-state">
    <mat-spinner diameter="50" color="primary"></mat-spinner>
    <p class="mt-3 text-muted">Loading requests...</p>
  </div>-->

  <!-- Error State 
  <div class="text-center my-5 py-5 error-state">
    <mat-icon class="text-danger" style="font-size: 48px;">error_outline</mat-icon>
    <h4 class="text-danger mt-3">Oops! Something went wrong</h4>
    <p class="text-muted mb-4">We couldn't load your service requests</p>
    <button mat-raised-button color="primary" class="px-4">
      <mat-icon>refresh</mat-icon> Retry
    </button>
  </div>-->

  <!-- Empty State 
  <div class="text-center my-5 py-5 empty-state">
    <mat-icon style="font-size: 48px;" class="text-primary">assignment</mat-icon>
    <h4 class="mt-3">No service requests found</h4>
    <p class="text-muted mb-4">Try adjusting your filters or create a new request</p>
    <button mat-raised-button color="primary" class="px-4">
      <mat-icon>add</mat-icon> Create Request
    </button>
  </div>-->

  <!-- Request List -->
  <div class="mb-5">
    <div class="table-responsive rounded-3 overflow-hidden shadow-sm">
      <table class="table table-bordered table-hover align-middle text-center mb-0">
        <thead class="table-primary">
          <tr>
            <th class="py-3">Service Name</th>
            <th class="py-3">Date</th>
            <th class="py-3">Status</th>
            <th class="py-3">Payment Method</th>
            
            <th class="py-3">Artisian Name</th>
            <th class="py-3">Actions</th>
          </tr>
        </thead>
        <tbody class="bg-light">
          <tr *ngFor="let request of filteredRequests | slice: pageIndex * pageSize : (pageIndex + 1) * pageSize">
            <td class="py-3">{{ request.serviceName || 'Unknown Service' }}</td>
            <td class="py-3">{{ request.createdAt | date:'mediumDate' }}</td>
            <td class="py-3">
              <span class="badge d-inline-flex align-items-center justify-content-center gap-1 py-2 px-3"
                    [ngClass]="getStatusClass(request.status)">
                <mat-icon style="font-size: 16px;">{{ getStatusIcon(request.status) }}</mat-icon>
                {{ getStatusText(request.status) }}
              </span>
            </td>
            <td class="py-3">{{ request.paymentMethod || 'N/A' }}</td>

            <td class="py-3">{{ request.paymentAmount ? '$' + request.paymentAmount : 'N/A' }}</td>
            <td class="py-3">
              {{ request.artisanName || 'Not assigned' }}
            </td>
            
            <td class="py-3">
              <button mat-icon-button color="primary" [routerLink]="['/request', request.paymentId]" matTooltip="View Details">
                <mat-icon>visibility</mat-icon>
              </button>
              
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Pagination -->
    <div class="mt-5 d-flex justify-content-center">
      <mat-paginator [length]="100" [pageSize]="10" [pageSizeOptions]="[5, 10, 25, 100]"
                     color="primary" class="rounded-3 shadow-sm"></mat-paginator>
    </div>
  </div>


